$(document).ready(function(e){e("#loginContainer").on("click",e=>{var t=firebase.auth().currentUser;t?firebase.auth().signOut().then(function(){}).catch(function(e){window.alert(e)}):firebase.auth().signInWithPopup(provider).then(function(e){e.credential.accessToken,e.user}).catch(function(e){var t=e.code,i=e.message;window.alert(t,i);e.email,e.credential})}),firebase.auth().onAuthStateChanged(function(t){if(t){var i,a,n,r;null!=(t=firebase.auth().currentUser)&&(i=t.displayName,a=t.email,n=t.photoURL,t.emailVerified,r=t.uid),window.location.href.indexOf("about")>=0&&(e("#name").val(i).attr("disabled","true"),e("#email").val(a).attr("disabled","true")),firebase.database().ref("/users/"+r+"/userinfo/username").once("value").then(function(e){if(!e.val()){console.log("no snapshot");var t=firebase.database().ref("users/"+r+"/docs/").push(),o=new Date;o=o.toString(),t.set({data:{ops:[{attributes:{color:"#363636",bold:!0,size:"huge"},insert:"Welcome To Graphite"},{insert:"\n"},{attributes:{size:"large"},insert:"A modern text editor"},{insert:"\nIf you have any questions or concerns please contact us at "},{attributes:{link:"mailto:support@graphitewriter.com"},insert:"support@graphitewriter.com"},{insert:"\n"}]},title:"Welcome To Graphite",date:o})}o=(o=new Date).toString(),firebase.database().ref("users/"+r+"/userinfo/").set({username:i,email:a,profile_picture:n,last_seen:o})}),e("#loginBtn").text("Logout")}else e("#loginBtn").text("Login"),(window.location.href.indexOf("app")>=0||window.location.href.indexOf("edit")>=0||window.location.href.indexOf("shared")>=0)&&firebase.auth().signInWithRedirect(provider)})});