NProgress.configure({showSpinner:!1}),firebase.auth().onAuthStateChanged(function(e){if(e){var t;null!=(e=firebase.auth().currentUser)&&(e.displayName,e.email,e.photoURL,e.emailVerified,t=e.uid);var s=new Vue({el:"#app",firebase:{fbdocs:{source:db.ref("/users/"+t+"/docs/").orderByChild("utcdate"),readyCallback:function(){this.fbdocs=this.fbdocs.slice().reverse(),this.docs=this.fbdocs}},fbdocsstor:db.ref("/users/"+t+"/docsStorage/")},data:{loaded:!0,newDocName:"",docs:[],modalDisplay:!1,docSearch:"",cache:[]},mounted:function(){},methods:{getUrl:function(e){this.loaded=!1;var t=Object.values(e).slice(-1)[0];return console.log(e.version),e.version&&2===e.version?"/edit?d="+t+"&v=2":"/edit?d="+t+"&v=1"},getAlt:function(e){return e?(e=JSON.stringify(e),e=e.toLowerCase()):"ERROR"},show:function(e){return!!e},openNewDoc:function(){this.modalDisplay=!0},closeNewDoc:function(){this.modalDisplay=!1},createNewDoc:function(){var e=this.newDocName;if(e){console.log(e);var t=new Date,o={data:"",title:e,date:t=t.toString(),utcdate:(new Date).getTime(),version:1};s.$firebaseRefs.fbdocs.push(o).then(()=>{s.$firebaseRefs.fbdocsstor.push(o).then(()=>{location.reload()})}),this.newDocName="",this.modalDisplay=!1}else window.alert("Document Names Must Be More than 1 Character")},search:function(){var e=this.docSearch.toLowerCase();let t=this.fbdocs;if(!e)return this.docs=this.fbdocs,this.searching=!1,this.fbdocs;const s=e,o=e=>{if(JSON.stringify(e.title))return JSON.stringify(e.title).toLowerCase().includes(s)};this.docs=t.filter(o)}},filters:{reverse:function(e){return e.slice().reverse()}}})}});